<html>
<head>
<title>Loan Calculator</title>
<script>
  const ai = prompt('What are your current annual interests in percentages(without %)?')/100;
  const cai = prompt('What are the annual interests you want to compare to in percentages(without %)?')/100;
  const cap = prompt('How much do you still owe on the loan(without the currency symbol)?');
  var ol = Number(cap); // Outstanding Loan
  var col = Number(cap); // Comparison
  const ma = prompt('What are your monthly annuities(without the currency symbol)?');
  const cma = prompt('What are the monthly annuities you want to compare to(without the currency symbol)?')
  const ic = 'day'; //prompt('How often are interests calculated? Every (type) "day" or "month".');
  const ia = prompt('How often are interests added to the loan? Every (type) "1" or "3" month(s).');
  var N = 0; // Month
  var ti = 0; // Temporary interests
  var p = 0; // Price
  var cp = 0; // Comparison
  const months = [31,28,31,30,31,30,31,31,30,31,30,31]; // Days in the months
  const di = (ai+1)**(1/365)-1; // Daily interests
  const cdi = (cai+1)**(1/365)-1; // Comparison
  const mi = (ai+1)**(1/12)-1; // Monthly interests
  const cmi = (cai+1)**(1/12)-1; // Comparison
  while (ol > ma-ti) { // Simulating the loan
    if(ic=='day'){
      if(N%Number(ia)==0){
        ol += ti; // Adding interests
        ti = 0; // Resetting temporary interests
      }
      ti += ol*di*months[N%12]; // Increasing temporary interests
      ol -= ma; // Paying annuity

      //alert('Outstanding loan: '+ol+' after '+N+' months.')
    }
    N++;
    //alert(ol)
  }
  p = (N+1)*ma+ol+ti-cap; // Calculating price
  //alert(p)
  ti=0;
  N=0;
  while (col > cma-ti) {
    if(ic=='day'){
      if(N%Number(ia)==0){
        col += ti;
        ti = 0;
      }
      ti += col*cdi*months[N%12];
      col -= cma;
      //alert('Outstanding loan: '+ol+' after '+N+' months.')
    }
    N++;
    //alert(ol)
  }
  cp = (N+1)*cma+col+ti-cap;
  var P = p-cp
  alert('The original price of the loan was: '+p+'. The new price is: '+cp+'. You will save: ' + Math.round(P));
</script>
</head>
<body>
</body>
